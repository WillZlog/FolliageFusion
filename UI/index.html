<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tree Care Recommender</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Essential styles for color boxes and table rendering */
        .color-box {
            width: 20px;
            height: 20px;
            border-radius: 0.25rem;
            display: inline-block; /* Makes them side-by-side */
            margin-right: 0.25rem;
            border: 1px solid #ccc; /* Add a subtle border for visibility */
            vertical-align: middle; /* Aligns colors better with text */
            box-sizing: border-box; /* Ensures padding/border are included in width/height */
        }

        /* Basic spinner style */
        .loading-spinner {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            margin-left: 10px;
            display: none; /* Hidden by default */
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Essential Table Styling for proper display */
        table {
            width: 100%;
            border-collapse: collapse; /* Removes double borders */
            margin-top: 1rem;
            background-color: white; /* Ensure table background is white */
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); /* Subtle shadow */
            border-radius: 0.5rem; /* Rounded corners for the table */
            overflow: hidden; /* Ensures rounded corners clip content */
        }
        th, td {
            border: 1px solid #e2e8f0; /* Tailwind's gray-200 for borders */
            padding: 0.75rem;
            text-align: left;
            vertical-align: top; /* Align content to the top in cells */
        }
        th {
            background-color: #edf2f7; /* Tailwind's gray-100 for headers */
            font-weight: bold;
            color: #2d3748; /* Darker text for headers */
            text-transform: uppercase; /* Uppercase headers */
            font-size: 0.875rem; /* Slightly smaller header font */
        }
        /* Style for the container around the table to match your general layout */
        .container {
            max-width: 1200px; /* Adjust as needed */
            margin: 2rem auto;
            padding: 1rem;
            font-family: Arial, sans-serif;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Tree Care Recommender</h1>
        
        <div class="mb-4 p-4 border rounded-lg bg-white shadow-sm">
            <h2 class="text-xl font-semibold text-gray-700 mb-3">Load from File</h2>
            <input type="file" id="jsonFileUpload" accept=".json" class="block w-full text-sm text-gray-700
                   file:mr-4 file:py-2 file:px-4
                   file:rounded-full file:border-0
                   file:text-sm file:font-semibold
                   file:bg-blue-50 file:text-blue-700
                   hover:file:bg-blue-100">
            <button id="uploadJsonBtn"
                    class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 ease-in-out mt-3 w-full flex items-center justify-center">
                Load JSON from File
                <div id="uploadSpinner" class="loading-spinner"></div>
            </button>
            <div id="fileUploadError" class="text-red-600 mt-2 font-medium hidden"></div>
        </div>

        <button id="loadSavedBtn"
                class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 ease-in-out w-full mt-4 mb-8 flex items-center justify-center">
            Load Last Saved Recommendations (from server's SavedRec.json)
            <div id="loadSavedSpinner" class="loading-spinner"></div>
        </button>


        <div id="responseContainer" class="mt-8 p-6 bg-gray-50 rounded-lg shadow-inner hidden">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Recommendations:</h2>
            
            <table>
                <thead>
                    <tr>
                        <th> Temperature </th>
                        <th> Humidity </th>
                        <th> Soil PH </th>
                        <th> Leaf ideal color</th>
                        <th> Trunk ideal color</th>
                        <th> General Recommendations </th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="dataRow">
                        <td id="TempOutput"> ... </td>
                        <td id="HumidOutput"> ... </td>
                        <td id="PHOutput"> ... </td>
                        <td id="LeafColor"> ... </td>
                        <td id="TrunkColor"> ... </td>
                        <td id="RecommendationsOutput"> ... </td>
                    </tr>
                </tbody>
            </table>
            <div id="errorDisplay" class="text-red-600 mt-4 font-medium hidden"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>